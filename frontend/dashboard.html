<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Gmail Sender Dashboard</title>

<!-- Google Icons -->

<link href="https://fonts.googleapis.com/css2?family=Material+Icons+Outlined" rel="stylesheet">

<style>
/* Preserve all your existing styles from original dashboard.html */
body { margin:0;font-family:"Inter",sans-serif;background:#f7f8fa; }
.navbar { background:#fff;padding:16px 28px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #e5e5e5;position:sticky;top:0;z-index:999;}
.nav-left { display:flex;align-items:center;gap:10px;font-size:18px;font-weight:600; }
.nav-left .icon { width:38px;height:38px;background:#ffe9e7;border-radius:50%;display:flex;align-items:center;justify-content:center; }
.nav-left .icon .material-icons-outlined { color:#ff4a3d;font-size:22px; }
.email-text { font-size:13px;color:#555;margin-top:-4px; }
.nav-right { display:flex;align-items:center;gap:14px; }
.nav-btn { border:1px solid #ddd;background:#fff;padding:8px 14px;border-radius:6px;cursor:pointer;font-size:14px;display:flex;align-items:center;gap:6px; }
.nav-btn:hover { background:#f2f2f2; }
.container { padding:30px; display:grid; grid-template-columns:1fr 1fr; gap:26px; }
.card { background:#fff;padding:25px;border-radius:12px;box-shadow:0 3px 12px rgba(0,0,0,0.07);border:1px solid #e5e5e5; }
.card h3 { margin-top:0;font-size:18px;font-weight:600;display:flex;align-items:center;gap:6px; }
.card h3 .material-icons-outlined { font-size:20px;color:#444; }
.upload-box { border:2px dashed #d8d8d8;border-radius:12px;padding:40px 20px;text-align:center;margin-top:16px; }
.upload-box .material-icons-outlined { font-size:48px;color:#888;margin-bottom:10px; }
.upload-box p { color:#666;margin-bottom:20px; }
.btn { padding:10px 18px;border-radius:6px;border:1px solid #ccc;background:#f5f5f5;cursor:pointer;font-size:14px; }
.btn:hover { background:#e9e9e9; }
.red-btn { width:100%; margin-top:18px; background:#ff4a3d;color:#fff;border:none; }
.red-btn:hover { background:#e33a30; }
textarea,input { width:100%; padding:12px;border-radius:6px;border:1px solid #dcdcdc;font-size:14px;margin-top:8px;resize:vertical; }
textarea:focus,input:focus { border-color:#ff4a3d;outline:none;box-shadow:0 0 0 2px rgba(255,74,61,0.16); }
.small-label { font-size:14px;margin-bottom:4px;font-weight:500;color:#444; }
.send-btn { width:100%; background:#ff4a3d;color:#fff;border:none;padding:14px 20px;font-size:15px;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;margin-top:18px;transition:0.2s; }
.send-btn:hover { background:#e33a30; }
</style>

</head>

<body>

<!-- Top Navbar -->

<div class="navbar">
    <div class="nav-left">
        <div class="icon"><span class="material-icons-outlined">mail</span></div>
        <div>
            AI Gmail Sender
            <div class="email-text" id="user-email">nabeelrafique101@gmail.com</div>
        </div>
    </div>

```
<div class="nav-right">
    <button class="nav-btn" onclick="alert('Settings page coming soon')">
        <span class="material-icons-outlined">settings</span>
    </button>

    <button class="nav-btn" onclick="logout()">
        <span class="material-icons-outlined">logout</span> Logout
    </button>
</div>
```

</div>

<!-- Main Dashboard -->

<div class="container">

```
<!-- Upload Contacts -->
<div class="card">
    <h3><span class="material-icons-outlined">upload</span> Upload Contacts</h3>

    <div class="upload-box">
        <span class="material-icons-outlined">group</span>
        <p>Upload a CSV file with name and email columns</p>

        <input type="file" id="contacts-file" style="display:none" accept=".csv">
        <button class="btn" onclick="document.getElementById('contacts-file').click()">
            <span class="material-icons-outlined" style="font-size:16px;">upload_file</span> Choose CSV File
        </button>
        <button class="btn" onclick="downloadSample()">Download Sample</button>
        <div id="contacts-count" style="margin-top:10px;font-size:14px;color:#555;"></div>
    </div>
</div>

<!-- AI Email Generator -->
<div class="card">
    <h3><span class="material-icons-outlined">auto_fix_high</span> AI Email Generator</h3>

    <label class="small-label">Email Description</label>
    <textarea id="email-description" rows="5" placeholder="Describe what the email should be about..."></textarea>

    <button class="btn red-btn" onclick="generateEmail()">
        <span class="material-icons-outlined" style="vertical-align:middle;margin-right:6px;">auto_awesome</span>
        Auto Generate Subject & Email
    </button>
</div>

<!-- Attachments -->
<div class="card">
    <h3><span class="material-icons-outlined">attach_file</span> Attachments</h3>

    <input type="file" id="attachments-file" style="display:none" multiple>
    <button class="btn" style="margin-top:10px;" onclick="document.getElementById('attachments-file').click()">
        <span class="material-icons-outlined" style="font-size:16px;">add</span> Add Attachments
    </button>
    <div id="attachments-count" style="margin-top:10px;font-size:14px;color:#555;"></div>
</div>

<!-- Email Content -->
<div class="card">
    <h3><span class="material-icons-outlined">mail_outline</span> Email Content</h3>

    <label class="small-label">Subject</label>
    <input type="text" id="email-subject" placeholder="Email subject line">

    <label class="small-label" style="margin-top:14px;">Email Body (Use {{name}} for personalization)</label>
    <textarea id="email-body" rows="8" placeholder="Write your email content here..."></textarea>

    <!-- SEND BUTTON -->
    <button class="send-btn" onclick="sendEmails()">
        <span class="material-icons-outlined" style="font-size:18px;">send</span>
        <span id="send-btn-text">Send to 0 Recipients</span>
    </button>

</div>
```

</div>

<script>
// --- Globals ---
let contactsCount = 0;
let attachmentsCount = 0;

// --- File upload handlers ---
document.getElementById('contacts-file').addEventListener('change', function(e){
    contactsCount = e.target.files.length;
    document.getElementById('contacts-count').innerText = contactsCount > 0 ? `${contactsCount} file selected` : '';
    document.getElementById('send-btn-text').innerText = `Send to ${contactsCount} Recipients`;
});

document.getElementById('attachments-file').addEventListener('change', function(e){
    attachmentsCount = e.target.files.length;
    document.getElementById('attachments-count').innerText = attachmentsCount > 0 ? `${attachmentsCount} attachment(s) ready` : '';
});

// --- Sample download ---
function downloadSample(){
    alert("Sample CSV download coming soon");
}

// --- Logout ---
function logout(){
    window.location.href = "/?logout=1";
}

// --- Generate Email (calls Streamlit backend) ---
function generateEmail(){
    let description = document.getElementById('email-description').value.trim();
    if(!description){ alert("Enter email description"); return; }
    // Redirect with query param for Streamlit backend
    window.location.href = `/?generate_description=${encodeURIComponent(description)}`;
}

// --- Send Emails ---
function sendEmails(){
    window.location.href = `/?send_emails=1`;
}
</script>

</body>
</html>
